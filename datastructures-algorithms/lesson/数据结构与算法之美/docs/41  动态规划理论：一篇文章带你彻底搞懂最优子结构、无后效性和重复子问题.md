# 41 | 动态规划理论：一篇文章带你彻底搞懂最优子结构、无后效性和重复子问题

![img](https://static001.geekbang.org/resource/image/8f/69/8f1b5488efa635247ef6c4ec9ea80e69.jpg)

### “一个模型三个特征”理论讲解

什么样的问题适合用动态规划来解决呢？换句话说，动态规划能解决的问题有什么规律可循呢？实际上，动态规划作为一个非常成熟的算法思想，很多人对此已经做了非常全面的总结。我把这部分理论总结为“一个模型三个特征”。

首先，我们来看，什么是“**一个模型**”？它指的是动态规划适合解决的问题的模型。我把这个模型定义为“**多阶段决策最优解模型**”。下面我具体来给你讲讲。

我们一般是用动态规划来解决最优问题。而解决问题的过程，需要经历多个决策阶段。每个决策阶段都对应着一组状态。然后我们寻找一组决策序列，经过这组决策序列，能够产生最终期望求解的最优值。

现在，我们再来看，什么是“三个特征”？它们分别是**最优子结构、无后效性和重复子问题**。

1. **最优子结构**

   问题的最优解包含子问题的最优解。即我们可以通过子问题的最优解，推导问题的最优解，

2. **无后效性**

   1. 第一层含义：在推导后面阶段的状态的时候，我们只关心前面阶段的状态值，不关心这个状态是怎么一步一步推导出来的。
   2. 第二层含义是，某阶段状态一旦确定，就不受之后阶段的决策影响。

3. **重复子问题**

   不同的决策序列，到达某个相同的阶段时，可能会产生重复的状态。

### 四种算法思想比较分析

如果我们将这四种算法思想分一下类，那贪心、回溯、动态规划可以归为一类，而分治单独可以作为一类，因为它跟其他三个都不大一样。

回溯算法是个“万金油”。基本上能用的动态规划、贪心解决的问题，我们都可以用回溯算法解决。回溯算法相当于穷举搜索。**穷举所有的情况，然后对比得到最优解**。不过，回溯算法的时间复杂度非常高，是指数级别的，只能用来解决小规模数据的问题。对于大规模数据的问题，用回溯算法解决的执行效率就很低了。

尽管动态规划比回溯算法高效，但是，并不是所有问题，都可以用动态规划来解决。能用动态规划解决的问题，需要满足三个特征，**最优子结构、无后效性和重复子问题**。在重复子问题这一点上，动态规划和分治算法的区分非常明显。分治算法要求分割成的子问题，不能有重复子问题，而动态规划正好相反，动态规划之所以高效，就是因为回溯算法实现中存在大量的重复子问题。

贪心算法实际上是动态规划算法的一种特殊情况。它解决问题起来更加高效，代码实现也更加简洁。不过，它可以解决的问题也更加有限。它能解决的问题需要满足三个条件，**最优子结构、无后效性和贪心选择性**（这里我们不怎么强调重复子问题）。

## 内容小结

“一个模型”指的是，问题可以抽象成分阶段决策最优解模型。

“三个特征”指的是最优子结构、无后效性和重复子问题。

状态转移表法解题思路大致可以概括为，**回溯算法实现 - 定义状态 - 画递归树 - 找重复子问题 - 画状态转移表 - 根据递推关系填表 - 将填表过程翻译成代码。**

状态转移方程法的大致思路可以概括为，**找最优子结构 - 写状态转移方程 - 将状态转移方程翻译成代码。**