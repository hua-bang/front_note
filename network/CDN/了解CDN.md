## 了解CDN

- #### 什么是CDN

  - CDN（content Delivery Network）内容发布网络
  - 思路：尽可能避免互联网上有可能影响数据传输速度和稳定性的环节，让内容传输更快。
  - CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。
  - 其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。

- #### 传统的网络访问形式

  ![cdnyuanli_1](https://user-gold-cdn.xitu.io/2018/5/15/163619c162b6b5b1?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

- #### 使用CDN访问形式

  - 原理：**CDN网络是在用户和服务器之间增加Cache层，如何将用户的请求引导到Cache上获得源服务器的数据**，主要是通过**接管DNS实现**
  - 过程：
    - 用户向浏览器提供要访问的域名
    - 浏览器调用域名解析库对域名进行解析，由于CDN对域名解析过程进行了调整，所以解析函数库得到的是该域名对应的CNAME记录（由于现在已经是使用了CDN服务，CNAME为CDN服务商域名）**，为了得到实际IP地址，浏览器需要再次对获得的CNAME域名进行解析以得到实际的IP地址；在此过程中，使用的全局负载均衡DNS解析，如根据地理位置信息解析对应的IP地址，使得用户能就近访问。（CDN服务来提供最近的机器）**
    - 此次解析得到CDN缓存服务器的IP地址，浏览器在得到实际的IP地址以后，向缓存服务器发出访问请求
    - 缓存服务器根据浏览器提供的要访问的域名，通过Cache内部专用DNS解析得到此域名的实际IP地址，再由缓存服务器向此实际IP地址提交访问请求
    - 缓存服务器从实际IP地址得得到内容以后，一方面在本地进行保存，以备以后使用，二方面把获取的数据返回给客户端，完成数据服务过程；
    - 客户端得到由缓存服务器返回的数据以后显示出来并完成整个浏览的数据请求过程

- #### CDN关键技术

  - 缓存算法
  - 分布能力
  - 负载均衡
  - 支持协议

- #### CDN的不足

  实时性不好是致命缺点。

  解决方法是在网络内容发生变化时将新的网络内容从服务器端直接传送到缓存器，或者当对网络内容的访问增加时将数据源服务器的网络内容尽可能实时地复制到缓存服务器。