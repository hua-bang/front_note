## DNS基础

#### DNS（Domain Name System）域名系统

- 由于访问ip网站不方便，后来通过dns服务器，访问域名，dns服务器会自动解析成ip地址，实际访问就是对应的ip地址

#### 根域与根域服务器

- www.sunhao.win实际上是访问了不同的域
- "."是DNS名称空间，分隔不同的域
- 例子（www.sunhao.com）
  - www,sunhao,win是不同的域，其实还有一个根域
    - 实际情况www.sunhao.win.根域
- DNS主要通过UDP
- 向根服务器请求win的地址，在通过win域向下请求，根域名服务器并不直接把待查询的域名解析成ip，而是告诉本地服务器下一步应找哪一个顶级域名进行查询。
- 所以根域名服务器很重要

#### 顶级域和顶级域服务器

- 举例：www.sunhao.win
  - 这里win就是顶级服务器
- 顶级域名分三类
  - 国家顶级域名
  - 通用顶级域名
  - 基础结构域名

#### 权威DNS和权威域名服务器

- 权威DNS服务器是经过上一级授权，对域名进行解析的服务器，同时它可以把解析授权转授给其他人。

#### 运营商DNS服务器和本地DNS服务器

- 实际中，不直接连接根服务器，而是通过本地DNS服务器上网
- 本地DNS主要指是指各地电信运营商提供的域名解析服务器。也就是我们在上网网卡里面你设置的DNS地址。当然也可以自己建设一个服务器。
- 当主机发送DNS请求，这个请求报文发送给本地域名服务器，本地服务器替我们进行DNS解析，ip地址是本地服务器返回的。

#### 应答：

- 权威应答：由权威服务器区域直接返回的应答地址.
- 非权威应答：由缓存或其他服务器返回的地址。

#### TTL值和缓存

- 什么是域名TTL
  - TTL（Time-To-Live），简单的说就是返回记录在DNS服务器上的保留时间，TTL值。
- DNS会将最终域名解析结果缓存到本地
  - 游览器缓存
  - OS缓存
- 访问域名时，会有优先访问游览器缓存，如果没有命中，则访问操作系统的DNS缓存，若还没有命中，则再次请求DNS服务器

#### HOST

- 在DNS系统之前，对应ip都是保存在hosts文件中，系统现保留
- 实际访问，会查询dns缓存，在看hosts有无记录