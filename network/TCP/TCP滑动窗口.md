#### TCP滑动窗口

## 1.  概述

- 解决了什么问题：发送方和接收方速率不匹配时，保证可靠传输和包乱序的问题
- 机制：接收方根据目前缓冲区大小，通知发送方目前能接收的最大值。发送方根据接收方的处理能力来发送数据。通过这种协调机制，防止接收端处理不过来。
- 窗口大小：接收方发给发送端的这个值称为窗口大小

## 2.示意图

- #### 初始示意图

  ![img](https://user-gold-cdn.xitu.io/2018/9/28/16620671a5cce8f7?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

  - 黑框为滑动窗口
  - #1表示收到的ack数据
  - 表示还没收到的ack数据
  - 表示窗口还没发出的
  - 窗口以外的数据

- #### 滑动过程示意图

  ![img](https://user-gold-cdn.xitu.io/2018/9/28/1662075479974db0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

### 3.拥塞窗口

- 解决什么问题：发送方发送速度过快，导致中转路由器拥堵的问题
- 机制：发送方增加一个拥塞窗口（cwnd），每次受到ack，窗口值加1。发送时，取拥塞窗口和接收方发来的窗口大小取最小值发送
- 起到发送方流量控制的作用